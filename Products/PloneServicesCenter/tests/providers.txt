.. -*-doctest-*-

=========
Providers
=========

Start with a portal.

    >>> from Products.PloneServicesCenter import testing
    >>> portal = testing.SERVICES_FUNCTIONAL_TESTING['portal']

Open a browser and log in as a user who can add content.

    >>> from Products.Five import testbrowser
    >>> browser = testbrowser.Browser()
    >>> browser.handleErrors = False
    >>> browser.open(portal.absolute_url())

    >>> browser.getLink('Log in').click()
    >>> browser.getControl('Login Name').value = 'admin'
    >>> browser.getControl('Password').value = 'secret'
    >>> browser.getControl('Log in').click()

Go to the providers folder and add a provider inside a provider folder.

    >>> browser.open(portal.support.providers.absolute_url())
    >>> browser.getLink(url='createObject?type_name=Provider').click()
    >>> browser.getControl('Title').value = 'Foo Provider Title'
    >>> browser.getControl('Description').value = 'Foo Provider Description'
    >>> browser.getControl('URL').value = 'http://foo.example.com'
    >>> browser.getControl('Save').click()
    >>> print browser.contents
    <...
                <dd>Changes saved.</dd>...
    >>> browser.url
    'http://nohost/plone/support/providers/foo-provider-title'

After the provider is now visible on the listing.

    >>> browser.open(portal.support.providers.absolute_url())
    >>> print browser.contents
    <...Foo Provider Title...
    ...Foo Provider Description...
    >>> browser.getLink('Foo Provider Title').click()
    >>> print browser.contents
    <...Foo Provider Title...
    ...Foo Provider Description...
    ...http://foo.example.com...
    >>> browser.url
    'http://nohost/plone/support/providers/foo-provider-title'

The properties aren't purged.

    >>> navtree_properties = portal.portal_properties.navtree_properties
    >>> 'Plone Site' in navtree_properties.getProperty('metaTypesNotToList')
    True

When a provider is submitted a content rule is triggered sending a
notification.

    >>> TODO